<aside class="sidebar">
  <!-- Sidebar Header -->
  <div class="sidebar-header">
    <a href="/" class="sidebar-brand">
      <i class="fas fa-industry"></i>
      <span class="brand-text">HSK PRO</span>
    </a>
  </div>

  <!-- User Panel -->
  <div class="sidebar-user">
    <div class="user-avatar">
      <i class="fas fa-user-tie"></i>
      <span class="status-badge"></span>
    </div>
    <div class="user-details">
      <p class="user-name">{{ (authService.currentUser())?.username }}</p>
      <span class="user-status">
        <i class="fas fa-circle"></i> Online
      </span>
    </div>
  </div>

  <!-- Menu -->
  <nav class="sidebar-menu">
    <div class="menu-section-title">MAIN MENU</div>

    <ul class="menu-list">
      <!-- Direct Link Items -->
      <li class="menu-item" *ngFor="let item of menuItems; let last = last">
        <!-- Direct route (no children) -->
        <ng-container *ngIf="!item.children && hasPermission(item.roles)">
          <a [routerLink]="item.route"
             routerLinkActive="active"
             [routerLinkActiveOptions]="{exact: true}"
             class="menu-link"
             [attr.data-label]="item.label"
             [title]="item.label">
            <i [class]="item.icon"></i>
            <span class="menu-label">{{ item.label }}</span>
          </a>
        </ng-container>

        <!-- Submenu (has children) -->
        <ng-container *ngIf="item.children && hasPermission(item.roles)">
          <a (click)="toggleMenu(item.label)"
             class="menu-link"
             [class.active]="isMenuExpanded(item.label)"
             [attr.data-label]="item.label"
             [title]="item.label"
             style="cursor: pointer;">
            <i [class]="item.icon"></i>
            <span class="menu-label">{{ item.label }}</span>
            <i class="fas fa-chevron-down chevron-icon"></i>
          </a>

          <!-- Submenu List -->
          <ul class="submenu" [class.open]="isMenuExpanded(item.label)">
            <li *ngFor="let child of item.children">
              <a [routerLink]="child.route"
                 routerLinkActive="active"
                 [routerLinkActiveOptions]="{exact: true}"
                 class="submenu-link"
                 [attr.data-label]="child.label"
                 [title]="child.label">
                <i [class]="child.icon"></i>
                <span>{{ child.label }}</span>
              </a>
            </li>
          </ul>
        </ng-container>
      </li>
    </ul>
  </nav>
</aside>